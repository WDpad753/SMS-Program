-- CREATING TABLES:
-- CREATING ATTENDEE DATABASE TABLE:
CREATE TABLE APP.ATENDDB(
ATTENDEE_ID INT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
FIRSTNAME VARCHAR(255),
LASTNAME VARCHAR(255),
GENDER CHAR(6),
DATEOFBIRTH VARCHAR(255),
PHONENUMBER VARCHAR(255),
OCCUPATION VARCHAR(255),
EMAIL VARCHAR(255));

-- CREATING EMPLOYEE DATABASE TABLE:
CREATE TABLE APP.EMPDB(
EMP_ID INT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
EMAIL VARCHAR(255),
PASSWORD VARCHAR(255),
FIRSTNAME VARCHAR(255),
LASTNAME VARCHAR(255),
GENDER CHAR(6),
DATEOFBIRTH DATE,
OCCUPATION VARCHAR(255),
PHONENUMBER VARCHAR(255));

-- CREATING ADMIN DATABASE TABLE:
CREATE TABLE APP.ADMINDB(
ADMIN_ID INT GENERATED ALWAYS AS IDENTITY,
EMAIL VARCHAR(255),
EMP_ID INT UNIQUE,
CONSTRAINT ADMIN_ID PRIMARY KEY (ADMIN_ID,EMAIL),
PASSWORD VARCHAR(255),
FIRSTNAME VARCHAR(255),
LASTNAME VARCHAR(255),
JOBPOSITION VARCHAR(255));

-- CREATING MESSAGE DATABASE TABLE:
CREATE TABLE APP.MSGDB(
FIRSTNAME VARCHAR(255),
MESSAGE LONG VARCHAR(2000),
PHONENUMBER VARCHAR(255));

-- INDEXING AND REFERENCING:
-- EMPLOYEE DATABASE TABLE:
-- ALTER TABLE APP.EMPDB ADD FOREIGN KEY (EMAIL) REFERENCES APP.ADMINDB(EMAIL);
CREATE INDEX EMAIL ON APP.EMPDB(EMAIL);

ALTER TABLE APP.EMPDB ADD CONSTRAINT EMP_ID FOREIGN KEY (EMP_ID) REFERENCES APP.ADMINDB(EMP_ID);
CREATE INDEX EMP_ID ON APP.EMPDB(EMP_ID);

-- ADMIN DATABASE TABLE:
ALTER TABLE APP.ADMINDB ADD CONSTRAINT FK_ADEMP_ID FOREIGN KEY (EMP_ID) REFERENCES APP.EMPDB(EMP_ID);
CREATE INDEX EMP_ID ON APP.ADMINDB (EMP_ID);
INSERT INTO APP.ADMINDB (EMP_ID)
SELECT EMP_ID  FROM APP.EMPDB;

-- ALTER TABLE APP.ADMINDB ADD FOREIGN KEY (EMAIL) REFERENCES APP.EMPDB(EMAIL);
CREATE INDEX EMAIL ON APP.ADMINDB(EMAIL);
-- INSERT INTO APP.ADMINDB (EMAIL)
-- SELECT EMAIL  FROM APP.EMPDB;